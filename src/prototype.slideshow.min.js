var PrototypeSlideShow=Class.create({defaultConfig:{CONTAINER:"slideshow",ELEMENTS:"li",DURATION:"1.0",TIMEOUT:"5",AUTOPLAY:true},initialize:function(a){this._options=a||{};this._container=this._options.container||$(this.defaultConfig.CONTAINER);this._elements=this._container.getElementsBySelector(this.defaultConfig.ELEMENTS);this._nextLink=this._container.down(this._options.nextLink)||false;this._previousLink=this._container.down(this._options.previousLink)||false;this._stopLink=this._container.down(this._options.stopLink)||false;this._duration=this._options.duration||this.defaultConfig.DURATION;this._timeout=this._options.timeout||this.defaultConfig.TIMEOUT;this._autoplay=this._options.autoplay||this.defaultConfig.AUTOPLAY;this._container.addClassName("prototype-slideshow");this._activeElement=0;this._elementCount=this._elements.length-1;this._hoverStop=false;this._clickStop=(this._autoplay==true)?false:true;this._observe();this._loop.delay(this._timeout,this);},_loop:function(a){(function b(){if(a._hoverStop==false&&a._clickStop==false){a._next();}b.delay(a._timeout);})();},_next:function(){if(this._activeElement<this._elementCount){this._fade(this._activeElement,this._activeElement+1);this._activeElement++;}else{this._fade(this._activeElement,0);this._activeElement=0;}},_previous:function(){if(this._activeElement!=0){this._fade(activeElement,activeElement-1);this._activeElement--;}else{this._fade(activeElement,this._elementCount);this._activeElement=this._elementCount;}},_fade:function(a,b){this._elements[a].fade(this._duration);this._elements[b].appear(this._duration);},_observe:function(){this._nextLink.observe("click",function(a){a.preventDefault;this._next();}.bind(this));this._previousLink.observe("click",function(a){a.preventDefault;this._previous();}.bind(this));this._stopLink.observe("click",function(a){a.preventDefault;this._clickStop=(this._clickStop!=true);}.bind(this));this._container.observe("mouseenter",function(){this._hoverStop=true;}.bind(this));this._container.observe("mouseleave",function(){this._hoverStop=false;}.bind(this));}});